var i=require("node:fs/promises"),{writeFile:d}=i,g=process.cwd(),c="In",u=e=>typeof e=="string",f=e=>u(e)&&!!e.length,y=async(e,s)=>{try{if(!e)throw new Error("Must specify an url");return await(await fetch(e,s)).json()||null}catch(t){return console.error(t.message),null}},h=async(e,s,t)=>{try{let n=`${g}/${e}/${s||"server"}.data.json`;await d(n,t)}catch(n){console.error(n.message)}};module.exports=(e={})=>{let s=Array.isArray(e.data)?e.data:[],t=f(e.saveIn)?e.saveIn:"src";return{name:"saveServerData",setup(n){n.onStart(async()=>{let l={method:"GET",headers:{"Content-type":"application/json; charset=UTF-8"}};for(let r=0;r<s.length;r++){let a=s[r];console.time(c),console.log(`Getting server data from ${a?.url}...`);let o=await y(a?.url,l);o&&(await h(t,a?.fileName,JSON.stringify(o)),console.log(`Server data fetched and saved as json in ${t}/${a?.fileName}.data.json`),console.timeEnd(c),console.log("-------------------------------------------"),console.log("-------------------------------------------"))}})}}};