var l=require("node:fs/promises"),{writeFile:i}=l,d=process.cwd(),g=e=>typeof e=="string",u=e=>g(e)&&!!e.length,f=async(e,s)=>{try{if(!e)throw new Error("Must specify an url");return await(await fetch(e,s)).json()||null}catch(t){return console.error(t.message),null}},y=async(e,s,t)=>{try{let a=`${d}/${e}/${s||"server"}.data.json`;await i(a,t)}catch(a){console.error(a.message)}};module.exports=(e={})=>{let s=Array.isArray(e.data)?e.data:[],t=u(e.saveIn)?e.saveIn:"src";return{name:"saveServerData",setup(a){a.onStart(async()=>{let c={method:"GET",headers:{"Content-type":"application/json; charset=UTF-8"}};for(let r=0;r<s.length;r++){let n=s[r];console.log(`Getting server data from ${n?.url}...`);let o=await f(n?.url,c);o&&(await y(t,n?.fileName,JSON.stringify(o)),console.log(`Server data fetched and saved as json in ${t}/${n?.fileName}.data.json`),console.log("-------------------------------------------"),console.log("-------------------------------------------"))}})}}};